#!/bin/sh

if [ $# -lt 1 ]; then
    echo "No source or destination defined. Usage: $0 source destination" >&2
    exit 1
elif [ $# -lt 2 ]; then
    echo "No destination defined. Usage: $0 source destination" >&2
    exit 1
elif [ $# -gt 2 ]; then
    echo "Too many arguments. Usage: $0 source destination" >&2
    exit 1
elif [ ! -d "$1" ]; then
   echo "Invalid source path: $1" >&2
   exit 1
elif [ ! -d "$2" ]; then
   echo "Invalid destination path: $2" >&2
   exit 1
elif [ ! -w "$2" ]; then
   echo "Directory not writable: $2" >&2
   exit 1
fi

START=$(date +%s)
rsync -aAXv $1/* $2
FINISH=$(date +%s)
echo "total time: $(( ($FINISH-$START) / 60 )) minutes, $(( ($FINISH-$START) % 60 )) seconds"
